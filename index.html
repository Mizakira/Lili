<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Ventas y Presupuesto</title>
    <!-- Tailwind CSS CDN para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos generales para un fondo más profesional y pastel con un sutil degradado */
        .min-h-screen {
            background: linear-gradient(135deg, #f0f4f8, #e8f0f7); /* Degradado suave de gris azulado */
        }
        /* Contenedor principal más elegante y bordes suaves con sombra pronunciada */
        .main-container {
            background-color: #ffffff;
            border-radius: 2rem; /* Aún más redondeado para suavidad */
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.08); /* Sombra más grande, suave y difusa */
            padding: 3.5rem; /* Más espacio interno para una sensación de amplitud */
            border: 1px solid #e0e7ee; /* Borde muy sutil para definición */
        }

        /* Botones con estilo profesional, tonos pasteles y mejor sombra */
        button {
            transition: all 0.3s ease-in-out;
            border-radius: 1rem; /* Bordes más redondeados */
            font-weight: 600; /* Semi-bold */
            letter-spacing: 0.03em; /* Ligero espaciado para mejor legibilidad */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* Sombra inicial sutil */
        }
        button:hover {
            transform: translateY(-4px); /* Efecto sutil de elevación al pasar el cursor */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); /* Sombra al hover más pronunciada pero suave */
        }

        /* Campos de entrada y selects más limpios y suaves con mejor foco */
        input[type="text"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            border-radius: 1rem; /* Bordes muy suaves */
            border: 1px solid #d1dae8; /* Un tono de gris azulado muy claro para el borde */
            padding: 0.9rem 1.4rem; /* Relleno uniforme y generoso */
            font-size: 1.05rem; /* Tamaño de fuente ligeramente más grande */
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #93c5fd; /* Un tono de azul pastel brillante para el foco */
            box-shadow: 0 0 0 5px rgba(147, 197, 253, 0.35); /* Anillo de foco suave y más amplio */
            outline: none;
        }
        textarea {
            resize: vertical;
        }

        /* Estilos para el modal de confirmación, más suave y elevado */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.65); /* Fondo un poco más oscuro para mejor enfoque */
        }
        .modal-content {
            padding: 4rem; /* Más padding */
            border-radius: 2rem; /* Bordes más suaves */
            box-shadow: 0 30px 70px rgba(0, 0, 0, 0.35); /* Sombra mucho más grande y suave */
            max-width: 600px; /* Un poco más ancho */
            border: 1px solid #e0e7ee;
        }
        .modal-content p {
            font-size: 1.3rem; /* Texto más grande en el modal */
            line-height: 1.8;
            color: #374151; /* Color de texto más definido */
        }

        /* Estilos específicos para los mensajes de notificación con pasteles más vibrantes */
        .message-box {
            top: 2.5rem; /* Más abajo del borde */
            right: 2.5rem;
            padding: 1.1rem 2rem;
            border-radius: 1.25rem; /* Más redondeado */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            font-weight: 500; /* Medium weight */
            border: 1px solid rgba(255,255,255,0.3); /* Borde sutil para pop */
        }
        .message-box-close {
            font-size: 2.2rem; /* Tamaño de la 'x' más grande */
            margin-left: 1.5rem;
        }

        /* Estilos para los títulos y texto con una tipografía más elegante y prominente */
        .main-heading {
            font-size: 3.8rem; /* Título principal aún más grande y llamativo */
            font-weight: 800; /* Extra-bold */
            color: #1a202c; /* Un gris muy oscuro para contraste fuerte */
            line-height: 1.1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.08); /* Sombra más pronunciada para profundidad */
            display: flex; /* Para alinear icono */
            align-items: center; /* Para alinear icono */
            justify-content: center; /* Centrar contenido horizontalmente */
        }
        .main-heading svg {
            margin-right: 1.5rem; /* Espacio entre icono y texto */
            stroke-width: 3.5; /* Grosor de línea para los iconos */
            color: #4a5568; /* Color para el icono del título principal */
        }
        .section-heading {
            font-size: 2.8rem; /* Títulos de sección grandes */
            font-weight: 700; /* Bold */
            color: #4a5568; /* Un gris azulado oscuro para los encabezados de sección */
            margin-bottom: 3rem; /* Más espacio inferior */
            padding-bottom: 1rem;
            border-bottom: 2px solid #e0e7ee; /* Línea más definida */
            display: flex; /* Para alinear icono */
            align-items: center; /* Para alinear icono */
        }
        .section-heading svg {
            margin-right: 1.2rem; /* Espacio entre icono y texto */
            stroke-width: 3; /* Grosor de línea para los iconos de sección */
        }
        .sub-heading {
            font-size: 1.6rem; /* Subtítulos de cards ligeramente más grandes */
            font-weight: 600; /* Semi-bold */
            color: #ffffff; /* Blanco para mejor contraste en tarjetas pastel */
            display: flex; /* Para alinear icono */
            align-items: center; /* Para alinear icono */
        }
        .sub-heading svg {
            margin-right: 1rem;
            stroke-width: 2.8; /* Grosor de línea para iconos de subtítulos */
        }
        .card-value {
            font-size: 3.5rem; /* Valores grandes en las cards */
            font-weight: 700;
            color: #ffffff;
        }
        .card-currency {
            font-size: 2.4rem; /* Tamaño de la moneda en las cards */
            font-weight: 600;
            color: #ffffff;
        }
        .card-secondary-value {
            font-size: 1.45rem; /* Valores secundarios en las cards */
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95); /* Blanco casi opaco */
        }
        
        /* Ajustes para tablas con un look más suave y flotante */
        table {
            border-spacing: 0 0.75rem; /* Más espaciado entre filas para un look más ligero */
        }
        th, td {
            padding: 1.2rem 1.5rem; /* Más padding para celdas */
            border-bottom: none; /* Eliminar borde inferior de celdas para un look flotante */
        }
        thead th {
            background-color: #e6f0fa; /* Fondo muy claro azulado para encabezados */
            font-size: 0.9rem; /* Tamaño de fuente ligeramente más grande */
            font-weight: 700;
            color: #5a67d8; /* Un azul más vibrante para los encabezados */
            text-transform: uppercase;
            letter-spacing: 0.1em; /* Más espaciado entre letras */
            border-bottom: 2px solid #c3daee; /* Borde inferior para el thead */
        }
        tbody tr {
            background-color: #ffffff; /* Fondo blanco para las filas */
            border-radius: 1rem; /* Bordes redondeados para las filas */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06); /* Sombra sutil para un efecto "flotante" */
            margin-bottom: 0.75rem; /* Asegurar espacio entre filas */
            transition: all 0.25s ease-in-out;
        }
        tbody tr:hover {
            background-color: #f7f9fc; /* Hover más claro y sutil */
            transform: translateY(-3px); /* Pequeña elevación al hover */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        tbody tr:last-child {
            margin-bottom: 0;
        }
        .overflow-x-auto {
            border-radius: 1.5rem; /* Redondeado para la tabla completa */
            border: none; /* Eliminar el borde principal de la tabla */
            padding: 0.5rem; /* Espaciado interno para la tabla */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN para transformar JSX a JavaScript en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Script de la aplicación React (Babel transpilado) -->
    <script type="text/babel">
        // Importa los hooks de React
        const { useState, useEffect, useCallback } = React;

        // Componente para el modal de confirmación
        const ConfirmModal = ({ message, onConfirm, onCancel }) => {
            return (
                <div className="modal-overlay">
                    <div className="modal-content">
                        <p className="text-gray-700 mb-12">{message}</p>
                        <div className="flex justify-center space-x-8">
                            <button
                                onClick={onCancel}
                                className="px-9 py-4 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-300 focus:ring-opacity-50 text-xl font-medium"
                            >
                                Cancelar
                            </button>
                            <button
                                onClick={onConfirm}
                                className="px-9 py-4 bg-rose-400 text-white rounded-xl hover:bg-rose-500 focus:outline-none focus:ring-4 focus:ring-rose-300 focus:ring-opacity-50 text-xl font-medium"
                            >
                                Confirmar
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Componente para la caja de mensajes (notificaciones)
        const MessageBox = ({ message, type, onClose }) => {
            let bgColor = '';
            let textColor = '';
            switch (type) {
                case 'success':
                    bgColor = 'bg-emerald-200';
                    textColor = 'text-emerald-800';
                    break;
                case 'error':
                    bgColor = 'bg-rose-200';
                    textColor = 'text-rose-800';
                    break;
                case 'info':
                    bgColor = 'bg-blue-200';
                    textColor = 'text-blue-800';
                    break;
                case 'warning':
                    bgColor = 'bg-amber-200';
                    textColor = 'text-amber-800';
                    break;
                default:
                    bgColor = 'bg-gray-200';
                    textColor = 'text-gray-800';
            }

            return (
                <div className={`message-box ${bgColor} ${textColor}`}>
                    <span>{message}</span>
                    <button onClick={onClose} className="message-box-close">
                        &times;
                    </button>
                </div>
            );
        };


        // Componente React App completo
        const App = () => {
            // Estado para la tasa de cambio, cargada desde localStorage
            const [exchangeRate, setExchangeRate] = useState(() => {
                const savedRate = localStorage.getItem('exchangeRate');
                return savedRate ? parseFloat(savedRate) : 36.5; // Valor por defecto si no hay nada guardado
            });

            // Estados para ventas, cargados desde localStorage
            const [sales, setSales] = useState(() => {
                const savedSales = localStorage.getItem('sales');
                return savedSales ? JSON.parse(savedSales) : [];
            });

            // Estados para gastos, cargados desde localStorage
            const [expenses, setExpenses] = useState(() => {
                const savedExpenses = localStorage.getItem('expenses');
                return savedExpenses ? JSON.parse(savedExpenses) : [];
            });

            // Estados del formulario de ventas
            const [saleDate, setSaleDate] = useState('');
            const [saleProduct, setSaleProduct] = useState('');
            const [saleQuantity, setSaleQuantity] = useState(''); 
            const [saleAmount, setSaleAmount] = useState('');   
            const [saleCurrency, setSaleCurrency] = useState('USD');
            const [salePaymentMethod, setSalePaymentMethod] = useState(''); 
            const [saleOperationNumber, setSaleOperationNumber] = useState(''); 

            // Estados del formulario de gastos
            const [expenseDate, setExpenseDate] = useState('');
            const [expenseCategory, setExpenseCategory] = useState('');
            const [expenseAmount, setExpenseAmount] = useState(''); 
            const [expenseCurrency, setExpenseCurrency] = useState('USD'); 
            // const [expensePaymentMethod, setExpensePaymentMethod] = useState(''); // Eliminado según solicitud
            // const [expenseOperationNumber, setExpenseOperationNumber = useState(''); // Eliminado según solicitud

            // ESTADOS para la Calculadora de Precios de Venta por Unidad (RESTAURADOS)
            const [calculatorMode, setCalculatorMode] = useState('calculateSellingPrice'); // 'calculateSellingPrice' o 'calculateProfitPercentage'
            const [totalCostPrice, setTotalCostPrice] = useState(''); // Costo TOTAL del lote
            const [purchaseQuantity, setPurchaseQuantity] = useState(''); // Cantidad de unidades compradas
            const [purchaseMeasurementUnit, setPurchaseMeasurementUnit] = useState('unidades'); // Unidad de medida de la compra
            const [profitPercentage, setProfitPercentage] = useState(''); // Porcentaje de ganancia deseado (cuando se calcula precio)
            
            const [desiredSellingPriceInput, setDesiredSellingPriceInput] = useState(''); // Precio de venta deseado (cuando se calcula % de ganancia)
            const [desiredSellingPriceCurrency, setDesiredSellingPriceCurrency] = useState('USD'); // Moneda del precio de venta deseado
            
            const [calculatedCostPerUnit, setCalculatedCostPerUnit] = useState(null); 
            const [calculatedSellingPricePerUnit, setCalculatedSellingPricePerUnit] = useState(null); 
            const [calculatedProfitPercentageResult, setCalculatedProfitPercentageResult] = useState(null); // Resultado del % de ganancia calculado

            // Estado para mensajes de usuario
            const [message, setMessage] = useState('');
            const [messageType, setMessageType] = useState(''); 
            const [showMessageBox, setShowMessageBox] = useState(false); 

            // Nuevos estados para el modal de confirmación
            const [showConfirmModal, setShowConfirmModal] = useState(false);
            const [modalMessage, setModalMessage] = useState('');
            const [onConfirmAction, setOnConfirmAction] = useState(null); 

            // Muestra mensajes temporales al usuario
            const showMessage = (msg, type) => {
                setMessage(msg);
                setMessageType(type);
                setShowMessageBox(true); 
                setTimeout(() => {
                    setShowMessageBox(false); 
                    setMessage(''); 
                    setMessageType('');
                }, 5000); 
            };

            // Función para cerrar el mensaje manualmente
            const closeMessage = () => {
                setShowMessageBox(false);
                setMessage('');
                setMessageType('');
            };

            // Función para abrir el modal de confirmación
            const openConfirmModal = (message, callback) => {
                setModalMessage(message);
                setOnConfirmAction(() => callback); 
                setShowConfirmModal(true);
            };

            // Manejador para confirmar la acción en el modal
            const handleConfirm = () => {
                if (onConfirmAction) {
                    onConfirmAction(); 
                }
                setShowConfirmModal(false); 
                setOnConfirmAction(null); 
            };

            // Manejador para cancelar la acción en el modal
            const handleCancel = () => {
                setShowConfirmModal(false); 
                setOnConfirmAction(null); 
            };

            // Guarda la tasa de cambio en localStorage cada vez que cambia
            useEffect(() => {
                localStorage.setItem('exchangeRate', exchangeRate.toString());
            }, [exchangeRate]);

            // Guarda las ventas en localStorage cada vez que cambian
            useEffect(() => {
                localStorage.setItem('sales', JSON.stringify(sales));
            }, [sales]);

            // Guarda los gastos en localStorage cada vez que cambian
            useEffect(() => {
                localStorage.setItem('expenses', JSON.stringify(expenses));
            }, [expenses]);

            // Manejador para añadir una nueva venta
            const handleAddSale = (e) => {
                e.preventDefault(); 

                const quantityVal = saleQuantity.trim();
                const amountVal = saleAmount.trim();

                if (!saleDate) {
                    showMessage('La fecha de venta no puede estar vacía.', 'error');
                    return;
                }
                if (!saleProduct.trim()) {
                    showMessage('El nombre del producto no puede estar vacío.', 'error');
                    return;
                }
                if (!quantityVal) {
                    showMessage('La cantidad no puede estar vacía.', 'error');
                    return;
                }
                const parsedQuantity = parseFloat(quantityVal);
                if (isNaN(parsedQuantity) || parsedQuantity <= 0) {
                    showMessage('La cantidad debe ser un número válido mayor que cero.', 'error');
                    return;
                }
                if (!amountVal) {
                    showMessage('El monto unitario no puede estar vacío.', 'error');
                    return;
                }
                const parsedAmount = parseFloat(amountVal);
                if (isNaN(parsedAmount) || parsedAmount <= 0) {
                    showMessage('El monto unitario debe ser un número válido mayor que cero.', 'error');
                    return;
                }
                if (!salePaymentMethod) {
                    showMessage('Por favor, selecciona un método de pago para la venta.', 'error');
                    return;
                }
                if (salePaymentMethod === 'Pago Móvil' && !saleOperationNumber.trim()) {
                    showMessage('El número de operación es obligatorio para Pago Móvil.', 'error');
                    return;
                }

                const newSale = {
                    id: Date.now(), 
                    date: saleDate,
                    product: saleProduct.trim(),
                    quantity: parsedQuantity,
                    amount: parsedAmount,
                    currency: saleCurrency,
                    paymentMethod: salePaymentMethod, 
                    operationNumber: salePaymentMethod === 'Pago Móvil' ? saleOperationNumber.trim() : '', 
                };
                
                setSales(prevSales => [...prevSales, newSale].sort((a, b) => new Date(b.date) - new Date(a.date)));
                showMessage('Venta agregada exitosamente.', 'success');

                setSaleDate('');
                setSaleProduct('');
                setSaleQuantity('');
                setSaleAmount('');
                setSaleCurrency('USD');
                setSalePaymentMethod(''); 
                setSaleOperationNumber(''); 
            };

            // Manejador para añadir un nuevo gasto
            const handleAddExpense = (e) => {
                e.preventDefault(); 

                const expenseAmountVal = expenseAmount.trim();

                if (!expenseDate) {
                    showMessage('La fecha de gasto no puede estar vacía.', 'error');
                    return;
                }
                if (!expenseCategory.trim()) {
                    showMessage('La categoría de gasto no puede estar vacía.', 'error');
                    return;
                }
                if (!expenseAmountVal) {
                    showMessage('El monto de gasto no puede estar vacío.', 'error');
                    return;
                }
                const parsedExpenseAmount = parseFloat(expenseAmountVal);
                if (isNaN(parsedExpenseAmount) || parsedExpenseAmount <= 0) {
                    showMessage('El monto de gasto debe ser un número válido mayor que cero.', 'error');
                    return;
                }
                // No se valida expensePaymentMethod ni expenseOperationNumber ya que fueron eliminados del formulario.

                const newExpense = {
                    id: Date.now(), 
                    date: expenseDate,
                    category: expenseCategory.trim(),
                    amount: parsedExpenseAmount,
                    currency: expenseCurrency,
                    paymentMethod: '', // Se establece vacío ya que no se selecciona un método de pago
                    operationNumber: '', // Se establece vacío ya que no se selecciona un número de operación
                };
                
                setExpenses(prevExpenses => [...prevExpenses, newExpense].sort((a, b) => new Date(b.date) - new Date(a.date)));
                showMessage('Gasto agregado exitosamente.', 'success');

                setExpenseDate('');
                setExpenseCategory('');
                setExpenseAmount('');
                setExpenseCurrency('USD'); // Reiniciar a USD, ya que es la única opción
                // setExpensePaymentMethod(''); // Eliminado
                // setExpenseOperationNumber(''); // Eliminado
            };

            // Manejador para eliminar una venta individual
            const handleDeleteSale = (id) => {
                setSales(prevSales => prevSales.filter(sale => sale.id !== id));
                showMessage('Venta eliminada.', 'success');
            };

            // Manejador para eliminar un gasto individual
            const handleDeleteExpense = (id) => {
                setExpenses(prevExpenses => prevExpenses.filter(expense => expense.id !== id));
                showMessage('Gasto eliminado.', 'success');
            };

            // Manejador para borrar TODO el historial de ventas
            const handleClearSales = () => {
                openConfirmModal(
                    '¿Estás seguro de que quieres borrar TODO el historial de ventas? Esta acción no se puede deshacer.',
                    () => {
                        setSales([]); 
                        localStorage.removeItem('sales'); 
                        showMessage('Historial de ventas borrado.', 'success');
                    }
                );
            };

            // Manejador para borrar TODO el historial de gastos
            const handleClearExpenses = () => {
                openConfirmModal(
                    '¿Estás seguro de que quieres borrar TODO el historial de gastos? Esta acción no se puede deshacer.',
                    () => {
                        setExpenses([]); 
                        localStorage.removeItem('expenses'); 
                        showMessage('Historial de gastos borrado.', 'success');
                    }
                );
            };

            // Función de utilidad para convertir a USD
            const convertToUSD = useCallback((amount, currency) => {
                if (currency === 'VES') {
                    return amount / exchangeRate;
                }
                return amount;
            }, [exchangeRate]);

            // Función de utilidad para convertir a VES
            const convertToVES = useCallback((amount, currency) => {
                if (currency === 'USD') {
                    return amount * exchangeRate;
                }
                return amount;
            }, [exchangeRate]);

            // Calculo de totales de ventas y gastos
            const totalSalesUSD = sales.reduce((sum, sale) => sum + convertToUSD(sale.amount * sale.quantity, sale.currency), 0);
            const totalExpensesUSD = expenses.reduce((sum, expense) => sum + convertToUSD(expense.amount, expense.currency), 0);
            const netProfitUSD = totalSalesUSD - totalExpensesUSD;

            // Manejador para calcular el precio de venta por unidad
            const handleCalculateSellingPrice = (e) => {
                e.preventDefault();
                const cost = parseFloat(totalCostPrice);
                const qty = parseFloat(purchaseQuantity);
                const profit = parseFloat(profitPercentage);

                if (isNaN(cost) || cost <= 0) {
                    showMessage('El costo total debe ser un número válido mayor que cero.', 'error');
                    setCalculatedCostPerUnit(null);
                    setCalculatedSellingPricePerUnit(null);
                    return;
                }
                if (isNaN(qty) || qty <= 0) {
                    showMessage('La cantidad comprada debe ser un número válido mayor que cero.', 'error');
                    setCalculatedCostPerUnit(null);
                    setCalculatedSellingPricePerUnit(null);
                    return;
                }
                if (isNaN(profit) || profit < 0) {
                    showMessage('El porcentaje de ganancia debe ser un número válido (0 o mayor).', 'error');
                    setCalculatedCostPerUnit(null);
                    setCalculatedSellingPricePerUnit(null);
                    return;
                }

                const costPerUnit = cost / qty;
                const sellingPricePerUnit = costPerUnit * (1 + profit / 100);

                setCalculatedCostPerUnit(costPerUnit);
                setCalculatedSellingPricePerUnit(sellingPricePerUnit);
                showMessage('Precio de venta calculado.', 'success');
            };

            // Manejador para calcular el porcentaje de ganancia
            const handleCalculateProfitPercentage = (e) => {
                e.preventDefault();
                const cost = parseFloat(totalCostPrice);
                const qty = parseFloat(purchaseQuantity);
                const desiredSellingPrice = parseFloat(desiredSellingPriceInput);

                if (isNaN(cost) || cost <= 0) {
                    showMessage('El costo total debe ser un número válido mayor que cero.', 'error');
                    setCalculatedProfitPercentageResult(null);
                    return;
                }
                if (isNaN(qty) || qty <= 0) {
                    showMessage('La cantidad comprada debe ser un número válido mayor que cero.', 'error');
                    setCalculatedProfitPercentageResult(null);
                    return;
                }
                if (isNaN(desiredSellingPrice) || desiredSellingPrice <= 0) {
                    showMessage('El precio de venta deseado debe ser un número válido mayor que cero.', 'error');
                    setCalculatedProfitPercentageResult(null);
                    return;
                }
                
                const costPerUnit = cost / qty;
                if (desiredSellingPrice < costPerUnit) {
                    showMessage('El precio de venta deseado es menor que el costo por unidad, resultaría en pérdida.', 'warning');
                }
                
                const profitPercentageResult = ((desiredSellingPrice - costPerUnit) / costPerUnit) * 100;
                setCalculatedProfitPercentageResult(profitPercentageResult);
                showMessage('Porcentaje de ganancia calculado.', 'success');
            };


            return (
                <div className="min-h-screen flex items-center justify-center p-4 sm:p-6 lg:p-8">
                    <div className="main-container w-full max-w-6xl">
                        <h1 className="main-heading text-center mb-14">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-dollar-sign">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            Gestor de Ventas y Presupuesto
                        </h1>

                        {/* Caja de mensajes */}
                        {showMessageBox && (
                            <MessageBox message={message} type={messageType} onClose={closeMessage} />
                        )}

                        {/* Modal de Confirmación */}
                        {showConfirmModal && (
                            <ConfirmModal
                                message={modalMessage}
                                onConfirm={handleConfirm}
                                onCancel={handleCancel}
                            />
                        )}

                        {/* Sección de Tasa de Cambio */}
                        <div className="mb-16 p-9 bg-blue-50 border border-blue-100 rounded-3xl shadow-lg">
                            <h2 className="section-heading">
                                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrows-right-left text-blue-800">
                                    <path d="M8 3H18L22 7L18 11H8"></path>
                                    <path d="M16 21H6L2 17L6 13H16"></path>
                                </svg>
                                Tasa de Cambio (USD a VES)
                            </h2>
                            <div className="flex flex-col sm:flex-row items-center space-y-6 sm:space-y-0 sm:space-x-6">
                                <label htmlFor="exchangeRate" className="text-xl text-gray-700 font-medium">1 USD =</label>
                                <input
                                    type="number"
                                    id="exchangeRate"
                                    value={exchangeRate}
                                    onChange={(e) => setExchangeRate(parseFloat(e.target.value) || 0)}
                                    className="flex-grow max-w-xs px-6 py-3.5 border border-blue-200 rounded-xl focus:ring-blue-400 focus:border-blue-400 text-lg"
                                    placeholder="Ej: 36.5"
                                    step="0.01"
                                    min="0"
                                />
                                <span className="text-xl text-gray-700 font-medium">VES</span>
                            </div>
                        </div>

                        {/* Resumen General */}
                        <div className="mb-16">
                            <h2 className="section-heading">
                                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-pie-chart text-gray-600">
                                    <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
                                    <path d="M22 12A10 10 0 0 0 12 2v10Z"></path>
                                </svg>
                                Resumen General
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-9">
                                {/* Total Ventas */}
                                <div className="bg-gradient-to-br from-emerald-300 to-emerald-500 text-white p-9 rounded-3xl shadow-2xl flex flex-col items-center justify-center transform hover:scale-105 transition duration-300">
                                    <h3 className="sub-heading mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-trending-up">
                                            <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
                                            <polyline points="16 7 22 7 22 13"></polyline>
                                        </svg>
                                        Total Ventas (USD)
                                    </h3>
                                    <p className="card-value">
                                        <span className="card-currency">$</span>{totalSalesUSD.toFixed(2)}
                                    </p>
                                    <p className="card-secondary-value mt-4">
                                        ≈ {(totalSalesUSD * exchangeRate).toFixed(2)} VES
                                    </p>
                                </div>
                                {/* Total Gastos */}
                                <div className="bg-gradient-to-br from-rose-300 to-rose-500 text-white p-9 rounded-3xl shadow-2xl flex flex-col items-center justify-center transform hover:scale-105 transition duration-300">
                                    <h3 className="sub-heading mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-trending-down">
                                            <polyline points="22 17 13.5 8.5 8.5 13.5 2 7"></polyline>
                                            <polyline points="16 17 22 17 22 11"></polyline>
                                        </svg>
                                        Total Gastos (USD)
                                    </h3>
                                    <p className="card-value">
                                        <span className="card-currency">$</span>{totalExpensesUSD.toFixed(2)}
                                    </p>
                                    <p className="card-secondary-value mt-4">
                                        ≈ {(totalExpensesUSD * exchangeRate).toFixed(2)} VES
                                    </p>
                                </div>
                                {/* Ganancia Neta */}
                                <div className="bg-gradient-to-br from-violet-400 to-indigo-600 text-white p-9 rounded-3xl shadow-2xl flex flex-col items-center justify-center transform hover:scale-105 transition duration-300">
                                    <h3 className="sub-heading mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-sack">
                                            <path d="M12 10h.01"></path>
                                            <path d="M17 10h.01"></path>
                                            <path d="M7 10h.01"></path>
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-8Z"></path>
                                            <path d="M18 8h-4"></path>
                                            <path d="M10 2v4"></path>
                                            <path d="M8 2h4"></path>
                                            <path d="M10 10v10"></path>
                                            <path d="M14 10v10"></path>
                                        </svg>
                                        Ganancia Neta (USD)
                                    </h3>
                                    <p className="card-value">
                                        <span className="card-currency">$</span>{netProfitUSD.toFixed(2)}
                                    </p>
                                    <p className="card-secondary-value mt-4">
                                        ≈ {(netProfitUSD * exchangeRate).toFixed(2)} VES
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Formulario de Nueva Venta */}
                        <div className="mb-16 p-9 bg-white rounded-3xl shadow-2xl border border-gray-100">
                            <h2 className="section-heading">
                                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-plus-circle text-blue-600">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="8" x2="12" y2="16"></line>
                                    <line x1="8" y1="12" x2="16" y2="12"></line>
                                </svg>
                                Registrar Nueva Venta
                            </h2>
                            <form onSubmit={handleAddSale} className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label htmlFor="saleDate" className="block text-gray-700 text-base font-bold mb-2">Fecha</label>
                                    <input
                                        type="date"
                                        id="saleDate"
                                        value={saleDate}
                                        onChange={(e) => setSaleDate(e.target.value)}
                                        className="w-full"
                                        required
                                    />
                                </div>
                                <div>
                                    <label htmlFor="saleProduct" className="block text-gray-700 text-base font-bold mb-2">Producto</label>
                                    <input
                                        type="text"
                                        id="saleProduct"
                                        value={saleProduct}
                                        onChange={(e) => setSaleProduct(e.target.value)}
                                        className="w-full"
                                        placeholder="Nombre del producto"
                                        required
                                    />
                                </div>
                                <div>
                                    <label htmlFor="saleQuantity" className="block text-gray-700 text-base font-bold mb-2">Cantidad</label>
                                    <input
                                        type="number"
                                        id="saleQuantity"
                                        value={saleQuantity}
                                        onChange={(e) => setSaleQuantity(e.target.value)}
                                        className="w-full"
                                        placeholder="Cantidad"
                                        min="0.01"
                                        step="0.01"
                                        required
                                    />
                                </div>
                                <div className="flex items-end space-x-4">
                                    <div className="flex-grow">
                                        <label htmlFor="saleAmount" className="block text-gray-700 text-base font-bold mb-2">Monto Unitario</label>
                                        <input
                                            type="number"
                                            id="saleAmount"
                                            value={saleAmount}
                                            onChange={(e) => setSaleAmount(e.target.value)}
                                            className="w-full"
                                            placeholder="Monto por unidad"
                                            min="0.01"
                                            step="0.01"
                                            required
                                        />
                                    </div>
                                    <div className="flex-shrink-0">
                                        <label htmlFor="saleCurrency" className="sr-only">Moneda</label>
                                        <select
                                            id="saleCurrency"
                                            value={saleCurrency}
                                            onChange={(e) => setSaleCurrency(e.target.value)}
                                            className="w-full py-3.5"
                                        >
                                            <option value="USD">USD</option>
                                            <option value="VES">VES</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label htmlFor="salePaymentMethod" className="block text-gray-700 text-base font-bold mb-2">Método de Pago</label>
                                    <select
                                        id="salePaymentMethod"
                                        value={salePaymentMethod}
                                        onChange={(e) => setSalePaymentMethod(e.target.value)}
                                        className="w-full"
                                        required
                                    >
                                        <option value="">Seleccione</option>
                                        <option value="Efectivo USD">Efectivo USD</option>
                                        <option value="Efectivo VES">Efectivo VES</option>
                                        <option value="Transferencia">Transferencia</option>
                                        <option value="Pago Móvil">Pago Móvil</option>
                                    </select>
                                </div>
                                {salePaymentMethod === 'Pago Móvil' && (
                                    <div>
                                        <label htmlFor="saleOperationNumber" className="block text-gray-700 text-base font-bold mb-2">Número de Operación</label>
                                        <input
                                            type="text"
                                            id="saleOperationNumber"
                                            value={saleOperationNumber}
                                            onChange={(e) => setSaleOperationNumber(e.target.value)}
                                            className="w-full"
                                            placeholder="Número de operación (Pago Móvil)"
                                            required={salePaymentMethod === 'Pago Móvil'}
                                        />
                                    </div>
                                )}
                                <div className="md:col-span-2 mt-5">
                                    <button
                                        type="submit"
                                        className="w-full bg-blue-400 text-white py-4.5 px-8 rounded-xl hover:bg-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50 text-xl flex items-center justify-center"
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-plus mr-3">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Agregar Venta
                                    </button>
                                </div>
                            </form>
                        </div>

                        {/* Historial de Ventas */}
                        <div className="mb-16 p-9 bg-white rounded-3xl shadow-2xl border border-gray-100">
                            <h2 className="section-heading">
                                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-receipt text-gray-600">
                                    <path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2h-2h-2h-2h-2h-2h-2H4Z"></path>
                                    <path d="M18 6H8"></path>
                                    <path d="M18 10H8"></path>
                                    <path d="M18 14H8"></path>
                                    <path d="M18 18H8"></path>
                                </svg>
                                Historial de Ventas
                            </h2>
                            {sales.length === 0 ? (
                                <p className="text-gray-600 text-center py-7 text-lg">No hay ventas registradas aún.</p>
                            ) : (
                                <>
                                    <div className="overflow-x-auto">
                                        <table className="min-w-full">
                                            <thead>
                                                <tr>
                                                    <th className="px-6 py-4 text-left">Fecha</th>
                                                    <th className="px-6 py-4 text-left">Producto</th>
                                                    <th className="px-6 py-4 text-left">Cantidad</th>
                                                    <th className="px-6 py-4 text-left">Monto Total</th>
                                                    <th className="px-6 py-4 text-left">Método de Pago</th>
                                                    <th className="px-6 py-4 text-left">Operación</th>
                                                    <th className="px-6 py-4 text-left">Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-gray-100">
                                                {sales.map((sale) => (
                                                    <tr key={sale.id}>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">{sale.date}</td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">{sale.product}</td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">{sale.quantity}</td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">
                                                            {sale.currency === 'USD' ? '$' : ''}{(sale.amount * sale.quantity).toFixed(2)} {sale.currency}
                                                            <span className="text-sm text-gray-500 block">
                                                                {sale.currency === 'USD' ? ` (≈ ${(sale.amount * sale.quantity * exchangeRate).toFixed(2)} VES)` : ` (≈ ${(sale.amount * sale.quantity / exchangeRate).toFixed(2)} USD)`}
                                                            </span>
                                                        </td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">{sale.paymentMethod}</td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">{sale.operationNumber || '-'}</td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-right text-base font-medium">
                                                            <button
                                                                onClick={() => openConfirmModal('¿Estás seguro de que quieres eliminar esta venta?', () => handleDeleteSale(sale.id))}
                                                                className="text-rose-600 hover:text-rose-800 ml-4 p-2"
                                                            >
                                                                Eliminar
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                    <div className="flex justify-end mt-9">
                                        <button
                                            onClick={handleClearSales}
                                            className="px-8 py-4.5 bg-rose-400 text-white rounded-xl hover:bg-rose-500 focus:outline-none focus:ring-4 focus:ring-rose-300 focus:ring-opacity-50 text-xl flex items-center justify-center"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-trash-2 mr-3">
                                                <path d="M3 6h18"></path>
                                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                                <line x1="14" y1="11" x2="14" y2="17"></line>
                                            </svg>
                                            Borrar Historial de Ventas
                                        </button>
                                    </div>
                                </>
                            )}
                        </div>

                        {/* Formulario de Nuevo Gasto */}
                        <div className="mb-16 p-9 bg-white rounded-3xl shadow-2xl border border-gray-100">
                            <h2 className="section-heading">
                                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-minus-circle text-rose-600">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="8" y1="12" x2="16" y2="12"></line>
                                </svg>
                                Registrar Nuevo Gasto
                            </h2>
                            <form onSubmit={handleAddExpense} className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label htmlFor="expenseDate" className="block text-gray-700 text-base font-bold mb-2">Fecha</label>
                                    <input
                                        type="date"
                                        id="expenseDate"
                                        value={expenseDate}
                                        onChange={(e) => setExpenseDate(e.target.value)}
                                        className="w-full"
                                        required
                                    />
                                </div>
                                <div>
                                    <label htmlFor="expenseCategory" className="block text-gray-700 text-base font-bold mb-2">Categoría</label>
                                    <input
                                        type="text"
                                        id="expenseCategory"
                                        value={expenseCategory}
                                        onChange={(e) => setExpenseCategory(e.target.value)}
                                        className="w-full"
                                        placeholder="Ej: Alquiler, Transporte, Publicidad"
                                        required
                                    />
                                </div>
                                <div className="flex items-end space-x-4">
                                    <div className="flex-grow">
                                        <label htmlFor="expenseAmount" className="block text-gray-700 text-base font-bold mb-2">Monto (USD)</label>
                                        <input
                                            type="number"
                                            id="expenseAmount"
                                            value={expenseAmount}
                                            onChange={(e) => setExpenseAmount(e.target.value)}
                                            className="w-full"
                                            placeholder="Monto del gasto"
                                            min="0.01"
                                            step="0.01"
                                            required
                                        />
                                    </div>
                                    <div className="flex-shrink-0">
                                        <label htmlFor="expenseCurrency" className="sr-only">Moneda</label>
                                        <select
                                            id="expenseCurrency"
                                            value={expenseCurrency}
                                            onChange={(e) => setExpenseCurrency(e.target.value)}
                                            className="w-full py-3.5"
                                            disabled
                                        >
                                            <option value="USD">USD</option>
                                        </select>
                                    </div>
                                </div>
                                <div className="md:col-span-2 mt-5">
                                    <button
                                        type="submit"
                                        className="w-full bg-rose-400 text-white py-4.5 px-8 rounded-xl hover:bg-rose-500 focus:outline-none focus:ring-4 focus:ring-rose-300 focus:ring-opacity-50 text-xl flex items-center justify-center"
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-minus mr-3">
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Agregar Gasto
                                    </button>
                                </div>
                            </form>
                        </div>

                        {/* Historial de Gastos */}
                        <div className="mb-16 p-9 bg-white rounded-3xl shadow-2xl border border-gray-100">
                            <h2 className="section-heading">
                                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-archive text-gray-600">
                                    <rect width="20" height="5" x="2" y="3" rx="1"></rect>
                                    <path d="M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"></path>
                                    <path d="M10 12h4"></path>
                                </svg>
                                Historial de Gastos
                            </h2>
                            {expenses.length === 0 ? (
                                <p className="text-gray-600 text-center py-7 text-lg">No hay gastos registrados aún.</p>
                            ) : (
                                <>
                                    <div className="overflow-x-auto">
                                        <table className="min-w-full">
                                            <thead>
                                                <tr>
                                                    <th className="px-6 py-4 text-left">Fecha</th>
                                                    <th className="px-6 py-4 text-left">Categoría</th>
                                                    <th className="px-6 py-4 text-left">Monto</th>
                                                    <th className="px-6 py-4 text-left">Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-gray-100">
                                                {expenses.map((expense) => (
                                                    <tr key={expense.id}>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">{expense.date}</td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">{expense.category}</td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-base text-gray-800">
                                                            {expense.currency === 'USD' ? '$' : ''}{expense.amount.toFixed(2)} {expense.currency}
                                                            <span className="text-sm text-gray-500 block">
                                                                {expense.currency === 'USD' ? ` (≈ ${(expense.amount * exchangeRate).toFixed(2)} VES)` : ` (≈ ${(expense.amount / exchangeRate).toFixed(2)} USD)`}
                                                            </span>
                                                        </td>
                                                        <td className="px-6 py-5 whitespace-nowrap text-right text-base font-medium">
                                                            <button
                                                                onClick={() => openConfirmModal('¿Estás seguro de que quieres eliminar este gasto?', () => handleDeleteExpense(expense.id))}
                                                                className="text-rose-600 hover:text-rose-800 ml-4 p-2"
                                                            >
                                                                Eliminar
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                    <div className="flex justify-end mt-9">
                                        <button
                                            onClick={handleClearExpenses}
                                            className="px-8 py-4.5 bg-rose-400 text-white rounded-xl hover:bg-rose-500 focus:outline-none focus:ring-4 focus:ring-rose-300 focus:ring-opacity-50 text-xl flex items-center justify-center"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-trash-2 mr-3">
                                                <path d="M3 6h18"></path>
                                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                                <line x1="14" y1="11" x2="14" y2="17"></line>
                                            </svg>
                                            Borrar Historial de Gastos
                                        </button>
                                    </div>
                                </>
                            )}
                        </div>

                        {/* Calculadora de Precios de Venta por Unidad */}
                        <div className="mb-16 p-9 bg-white rounded-3xl shadow-2xl border border-gray-100">
                            <h2 className="section-heading">
                                <svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-calculator text-gray-600">
                                    <rect x="8" y="2" width="8" height="4" rx="1"></rect>
                                    <path d="M17 17v-2H7v2"></path>
                                    <path d="M17 10h-2V7H7v3"></path>
                                    <path d="M14 17h-4V14h4v3Z"></path>
                                    <rect x="3" y="6" width="18" height="16" rx="2"></rect>
                                </svg>
                                Calculadora de Precios de Venta por Unidad
                            </h2>

                            <div className="flex flex-col sm:flex-row mb-9 space-y-5 sm:space-y-0 sm:space-x-7">
                                <button
                                    onClick={() => setCalculatorMode('calculateSellingPrice')}
                                    className={`flex-1 py-4.5 px-8 rounded-xl text-xl flex items-center justify-center ${calculatorMode === 'calculateSellingPrice' ? 'bg-indigo-400 text-white shadow-md' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'}`}
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-chevrons-right mr-3">
                                        <polyline points="7 7 12 12 7 17"></polyline>
                                        <polyline points="13 7 18 12 13 17"></polyline>
                                    </svg>
                                    Calcular Precio de Venta
                                </button>
                                <button
                                    onClick={() => setCalculatorMode('calculateProfitPercentage')}
                                    className={`flex-1 py-4.5 px-8 rounded-xl text-xl flex items-center justify-center ${calculatorMode === 'calculateProfitPercentage' ? 'bg-indigo-400 text-white shadow-md' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'}`}
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-percent mr-3">
                                        <line x1="19" y1="5" x2="5" y2="19"></line>
                                        <circle cx="6.5" cy="6.5" r="2.5"></circle>
                                        <circle cx="17.5" cy="17.5" r="2.5"></circle>
                                    </svg>
                                    Calcular Porcentaje de Ganancia
                                </button>
                            </div>

                            {calculatorMode === 'calculateSellingPrice' ? (
                                <form onSubmit={handleCalculateSellingPrice} className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <label htmlFor="totalCostPrice" className="block text-gray-700 text-base font-bold mb-2">Costo Total del Lote (USD)</label>
                                        <input
                                            type="number"
                                            id="totalCostPrice"
                                            value={totalCostPrice}
                                            onChange={(e) => setTotalCostPrice(e.target.value)}
                                            className="w-full"
                                            placeholder="Ej: 100"
                                            min="0.01"
                                            step="0.01"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label htmlFor="purchaseQuantity" className="block text-gray-700 text-base font-bold mb-2">Cantidad de Unidades Compradas</label>
                                        <div className="flex space-x-4">
                                            <input
                                                type="number"
                                                id="purchaseQuantity"
                                                value={purchaseQuantity}
                                                onChange={(e) => setPurchaseQuantity(e.target.value)}
                                                className="flex-grow"
                                                placeholder="Ej: 10"
                                                min="0.01"
                                                step="0.01"
                                                required
                                            />
                                            <select
                                                value={purchaseMeasurementUnit}
                                                onChange={(e) => setPurchaseMeasurementUnit(e.target.value)}
                                                className="w-auto py-3.5"
                                            >
                                                <option value="unidades">Unidades</option>
                                                <option value="kg">Kg</option>
                                                <option value="litros">Litros</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label htmlFor="profitPercentage" className="block text-gray-700 text-base font-bold mb-2">Porcentaje de Ganancia Deseado (%)</label>
                                        <input
                                            type="number"
                                            id="profitPercentage"
                                            value={profitPercentage}
                                            onChange={(e) => setProfitPercentage(e.target.value)}
                                            className="w-full"
                                            placeholder="Ej: 30 (para 30%)"
                                            min="0"
                                            step="0.01"
                                            required
                                        />
                                    </div>
                                    <div className="md:col-span-2 mt-5">
                                        <button
                                            type="submit"
                                            className="w-full bg-indigo-400 text-white py-4.5 px-8 rounded-xl hover:bg-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-300 focus:ring-opacity-50 text-xl flex items-center justify-center"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-dollar-sign mr-3">
                                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                            </svg>
                                            Calcular Precio de Venta
                                        </button>
                                    </div>
                                    {(calculatedCostPerUnit !== null && calculatedSellingPricePerUnit !== null) && (
                                        <div className="md:col-span-2 mt-9 p-7 bg-indigo-50 border border-indigo-200 rounded-2xl shadow-inner">
                                            <h3 className="text-xl font-semibold text-indigo-800 mb-5">Resultados:</h3>
                                            <p className="text-gray-700 text-lg">
                                                Costo por {purchaseMeasurementUnit}: <span className="font-bold text-indigo-700">${calculatedCostPerUnit.toFixed(2)} USD</span>
                                                <span className="text-base text-gray-500 ml-4"> (≈ {(calculatedCostPerUnit * exchangeRate).toFixed(2)} VES)</span>
                                            </p>
                                            <p className="text-gray-700 text-lg mt-3">
                                                Precio de Venta Sugerido por {purchaseMeasurementUnit} (con {profitPercentage}% de ganancia): <span className="font-bold text-xl text-indigo-900">${calculatedSellingPricePerUnit.toFixed(2)} USD</span>
                                                <span className="text-base text-gray-500 ml-4"> (≈ {(calculatedSellingPricePerUnit * exchangeRate).toFixed(2)} VES)</span>
                                            </p>
                                        </div>
                                    )}
                                </form>
                            ) : (
                                <form onSubmit={handleCalculateProfitPercentage} className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <label htmlFor="totalCostPrice" className="block text-gray-700 text-base font-bold mb-2">Costo Total del Lote (USD)</label>
                                        <input
                                            type="number"
                                            id="totalCostPrice"
                                            value={totalCostPrice}
                                            onChange={(e) => setTotalCostPrice(e.target.value)}
                                            className="w-full"
                                            placeholder="Ej: 100"
                                            min="0.01"
                                            step="0.01"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label htmlFor="purchaseQuantity" className="block text-gray-700 text-base font-bold mb-2">Cantidad de Unidades Compradas</label>
                                        <div className="flex space-x-4">
                                            <input
                                                type="number"
                                                id="purchaseQuantity"
                                                value={purchaseQuantity}
                                                onChange={(e) => setPurchaseQuantity(e.target.value)}
                                                className="flex-grow"
                                                placeholder="Ej: 10"
                                                min="0.01"
                                                step="0.01"
                                                required
                                            />
                                            <select
                                                value={purchaseMeasurementUnit}
                                                onChange={(e) => setPurchaseMeasurementUnit(e.target.value)}
                                                className="w-auto py-3.5"
                                            >
                                                <option value="unidades">Unidades</option>
                                                <option value="kg">Kg</option>
                                                <option value="litros">Litros</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div className="flex items-end space-x-4">
                                        <div className="flex-grow">
                                            <label htmlFor="desiredSellingPriceInput" className="block text-gray-700 text-base font-bold mb-2">Precio de Venta Deseado por Unidad</label>
                                            <input
                                                type="number"
                                                id="desiredSellingPriceInput"
                                                value={desiredSellingPriceInput}
                                                onChange={(e) => setDesiredSellingPriceInput(e.target.value)}
                                                className="w-full"
                                                placeholder="Ej: 15"
                                                min="0.01"
                                                step="0.01"
                                                required
                                            />
                                        </div>
                                        <div className="flex-shrink-0">
                                            <label htmlFor="desiredSellingPriceCurrency" className="sr-only">Moneda de Venta</label>
                                            <select
                                                id="desiredSellingPriceCurrency"
                                                value={desiredSellingPriceCurrency}
                                                onChange={(e) => setDesiredSellingPriceCurrency(e.target.value)}
                                                className="w-full py-3.5"
                                            >
                                                <option value="USD">USD</option>
                                                <option value="VES">VES</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div className="md:col-span-2 mt-5">
                                        <button
                                            type="submit"
                                            className="w-full bg-indigo-400 text-white py-4.5 px-8 rounded-xl hover:bg-indigo-500 focus:outline-none focus:ring-4 focus:ring-indigo-300 focus:ring-opacity-50 text-xl flex items-center justify-center"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-percent mr-3">
                                                <line x1="19" y1="5" x2="5" y2="19"></line>
                                                <circle cx="6.5" cy="6.5" r="2.5"></circle>
                                                <circle cx="17.5" cy="17.5" r="2.5"></circle>
                                            </svg>
                                            Calcular Porcentaje de Ganancia
                                        </button>
                                    </div>
                                    {calculatedProfitPercentageResult !== null && (
                                        <div className="md:col-span-2 mt-9 p-7 bg-indigo-50 border border-indigo-200 rounded-2xl shadow-inner">
                                            <h3 className="text-xl font-semibold text-indigo-800 mb-5">Resultados:</h3>
                                            <p className="text-gray-700 text-lg">
                                                Costo por {purchaseMeasurementUnit}: <span className="font-bold text-indigo-700">${(parseFloat(totalCostPrice) / parseFloat(purchaseQuantity)).toFixed(2)} USD</span>
                                                <span className="text-base text-gray-500 ml-4"> (≈ {((parseFloat(totalCostPrice) / parseFloat(purchaseQuantity)) * exchangeRate).toFixed(2)} VES)</span>
                                            </p>
                                            <p className="text-gray-700 text-lg mt-3">
                                                Con un precio de venta de {desiredSellingPriceCurrency === 'USD' ? '$' : ''}{parseFloat(desiredSellingPriceInput).toFixed(2)} {desiredSellingPriceCurrency} por {purchaseMeasurementUnit}, el porcentaje de ganancia es: <span className="font-bold text-xl text-indigo-900">{calculatedProfitPercentageResult.toFixed(2)}%</span>
                                            </p>
                                        </div>
                                    )}
                                </form>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // Renderiza el componente principal de la aplicación React
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
